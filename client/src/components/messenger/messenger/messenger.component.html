<div class="card">
  <div class="card-header">
    <form #f="ngForm" autocomplete="off">
      <input
        type="search"
        name="search"
        class="form-control mr-sm-2 search"
        placeholder="Search friends"
        ngModel
        (ngModelChange)="searchFriends(f)"
      />
    </form>
    <div *ngFor="let friend of filteredFriends">
      <p (click)="openPrivateChat(friend.id)" class="friend">
        {{ friend.firstName + " " + friend.lastName }}
      </p>
      <br />
    </div>
  </div>
  <div class="card-body">
    <div *ngFor="let friend of friends">
      <div
        class="chat"
        *ngIf="chatHistory[friend.id].length"
        (click)="openPrivateChat(friend.id)"
      >
        <div *ngIf="friend.imageUrl" class="friend">
          <img avatar src="{{ friend.imageUrl }}" width="45px" height="45px" />
        </div>
        <div *ngIf="!friend.imageUrl" class="friend">
          <img
            avatar
            src="/assets/images/avatar.png"
            width="40px"
            height="40px"
          />
        </div>
        <div class="friend name">
          {{ friend.firstName }} {{ friend.lastName }}
          <br />
          {{
            chatHistory[friend.id][chatHistory[friend.id].length - 1].message
          }}
        </div>
      </div>
    </div>
  </div>
</div>
